{"ast":null,"code":"import { injectIntoHead } from '../helpers/domControllers';\n\nconst externalLoaderPlugin = (element, plugins, app) => {\n  var _a;\n\n  const plugin = plugins === null || plugins === void 0 ? void 0 : plugins.find(p => p.name === 'external-loader');\n  const paths = (_a = plugin === null || plugin === void 0 ? void 0 : plugin.options) === null || _a === void 0 ? void 0 : _a.paths;\n\n  if (!paths || !paths.length || !app) {\n    return;\n  }\n\n  const scriptTags = [];\n  const styleTags = [];\n  paths.forEach(path => {\n    const actualPath = typeof path === 'string' ? path : path.src;\n    const async = typeof path === 'string' ? false : path.async;\n    const useHead = typeof path === 'string' ? undefined : path.useHead;\n\n    if (actualPath.endsWith('.js')) {\n      const script = document.createElement('script');\n      script.src = actualPath;\n      script.async = !!async;\n\n      if (useHead !== undefined && !useHead) {\n        script.setAttribute('use-head', 'false');\n      } else {\n        script.setAttribute('use-head', 'true');\n      }\n\n      scriptTags.push(script);\n    }\n\n    if (actualPath.endsWith('.css')) {\n      const link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.href = actualPath;\n\n      if (useHead) {\n        link.setAttribute('use-head', 'true');\n      } else {\n        link.setAttribute('use-head', 'false');\n      }\n\n      styleTags.push(link);\n    }\n  });\n  const insertionPoint = document.createElement('span');\n  insertionPoint.id = 'direflow_external-sources';\n\n  if (!window.externalSourcesLoaded) {\n    window.externalSourcesLoaded = {};\n  }\n\n  scriptTags.forEach(script => {\n    if (script.getAttribute('use-head') === 'true') {\n      injectIntoHead(script);\n    } else {\n      insertionPoint.appendChild(script);\n    }\n\n    window.externalSourcesLoaded[script.src] = {\n      state: 'loading'\n    };\n    script.addEventListener('load', () => {\n      var _a, _b;\n\n      window.externalSourcesLoaded[script.src].state = 'completed';\n      (_b = (_a = window.externalSourcesLoaded[script.src]).callback) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  });\n  styleTags.forEach(link => {\n    if (link.getAttribute('use-head') === 'true') {\n      injectIntoHead(link);\n    } else {\n      insertionPoint.appendChild(link);\n    }\n\n    window.externalSourcesLoaded[link.href] = {\n      state: 'loading'\n    };\n    link.addEventListener('load', () => {\n      var _a, _b;\n\n      window.externalSourcesLoaded[link.href].state = 'completed';\n      (_b = (_a = window.externalSourcesLoaded[link.href]).callback) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  });\n  return [app, insertionPoint];\n};\n\nexport default externalLoaderPlugin;","map":{"version":3,"sources":["/home/taras/dev/lp-button/node_modules/direflow-component/dist/plugins/externalLoaderPlugin.js"],"names":["injectIntoHead","externalLoaderPlugin","element","plugins","app","_a","plugin","find","p","name","paths","options","length","scriptTags","styleTags","forEach","path","actualPath","src","async","useHead","undefined","endsWith","script","document","createElement","setAttribute","push","link","rel","href","insertionPoint","id","window","externalSourcesLoaded","getAttribute","appendChild","state","addEventListener","_b","callback","call"],"mappings":"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","sourcesContent":["import { injectIntoHead } from '../helpers/domControllers';\nconst externalLoaderPlugin = (element, plugins, app) => {\n    var _a;\n    const plugin = plugins === null || plugins === void 0 ? void 0 : plugins.find((p) => p.name === 'external-loader');\n    const paths = (_a = plugin === null || plugin === void 0 ? void 0 : plugin.options) === null || _a === void 0 ? void 0 : _a.paths;\n    if (!paths || !paths.length || !app) {\n        return;\n    }\n    const scriptTags = [];\n    const styleTags = [];\n    paths.forEach((path) => {\n        const actualPath = typeof path === 'string' ? path : path.src;\n        const async = typeof path === 'string' ? false : path.async;\n        const useHead = typeof path === 'string' ? undefined : path.useHead;\n        if (actualPath.endsWith('.js')) {\n            const script = document.createElement('script');\n            script.src = actualPath;\n            script.async = !!async;\n            if (useHead !== undefined && !useHead) {\n                script.setAttribute('use-head', 'false');\n            }\n            else {\n                script.setAttribute('use-head', 'true');\n            }\n            scriptTags.push(script);\n        }\n        if (actualPath.endsWith('.css')) {\n            const link = document.createElement('link');\n            link.rel = 'stylesheet';\n            link.href = actualPath;\n            if (useHead) {\n                link.setAttribute('use-head', 'true');\n            }\n            else {\n                link.setAttribute('use-head', 'false');\n            }\n            styleTags.push(link);\n        }\n    });\n    const insertionPoint = document.createElement('span');\n    insertionPoint.id = 'direflow_external-sources';\n    if (!window.externalSourcesLoaded) {\n        window.externalSourcesLoaded = {};\n    }\n    scriptTags.forEach((script) => {\n        if (script.getAttribute('use-head') === 'true') {\n            injectIntoHead(script);\n        }\n        else {\n            insertionPoint.appendChild(script);\n        }\n        window.externalSourcesLoaded[script.src] = {\n            state: 'loading',\n        };\n        script.addEventListener('load', () => {\n            var _a, _b;\n            window.externalSourcesLoaded[script.src].state = 'completed';\n            (_b = (_a = window.externalSourcesLoaded[script.src]).callback) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n    });\n    styleTags.forEach((link) => {\n        if (link.getAttribute('use-head') === 'true') {\n            injectIntoHead(link);\n        }\n        else {\n            insertionPoint.appendChild(link);\n        }\n        window.externalSourcesLoaded[link.href] = {\n            state: 'loading',\n        };\n        link.addEventListener('load', () => {\n            var _a, _b;\n            window.externalSourcesLoaded[link.href].state = 'completed';\n            (_b = (_a = window.externalSourcesLoaded[link.href]).callback) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n    });\n    return [app, insertionPoint];\n};\nexport default externalLoaderPlugin;\n"]},"metadata":{},"sourceType":"module"}